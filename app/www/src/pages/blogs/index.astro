---
import { BlogsIndex } from "component/page/blogs/BlogsIndex";
import { getBlogs } from "microcms/query/blogs";
import { isFailure } from "result";

import { microCMS } from "../../config/microcms";

const blogsResponse = await getBlogs(microCMS(), [
  "id",
  "eyecatch",
  "title",
  "publishedAt",
  "status",
]);

if (isFailure(blogsResponse)) {
  throw blogsResponse.cause;
}

const props = blogsResponse.value;
---

<BlogsIndex blogs={props.contents.filter((v) => v.status[0] === "公開")} />
