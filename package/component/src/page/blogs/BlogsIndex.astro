---
import { intlFormat } from "date-fns";
import type { Blog } from "microcms/query/blogs";
import { Container, styled } from "pandacss/jsx";

import BaseLayout from "../../layout/BaseLayout.astro";

export type Props = {
  blogs: Pick<Blog, "id" | "publishedAt" | "title" | "eyecatch">[];
};
const blogs = Astro.props.blogs;
---

<BaseLayout title="blogs">
  <Container
    maxWidth={"80rem"}
    paddingX={0}
    display={"flex"}
    flexDirection={"column"}
    justifyContent={"center"}
    alignItems={"center"}
  >
    {
      blogs.map((v) => (
        <styled.a
          href={`/blogs/${v.id}`}
          width={"100%"}
          display={"grid"}
          gridTemplateColumns={"auto auto"}
          gridTemplateRows={"auto auto"}
          gridTemplateAreas={'"image image" "title publishAt"'}
          placeItems={"center"}
        >
          <styled.img
            src={v.eyecatch.url}
            alt=""
            maxWidth={"40rem"}
            maxHeight={"30rem"}
            objectFit={"contain"}
            width={v.eyecatch.width}
            height={v.eyecatch.height}
            gridArea={"image"}
          />
          <styled.div gridArea={"title"}>{v.title}</styled.div>
          <styled.div gridArea={"publishAt"}>
            {intlFormat(
              new Date(v.publishedAt ?? ""),
              {
                timeZone: "Asia/Tokyo",
                year: "numeric",
                month: "numeric",
                day: "numeric",
                hour: "numeric",
                minute: "numeric",
              },
              { locale: "ja" },
            )}
          </styled.div>
        </styled.a>
      ))
    }
  </Container>
</BaseLayout>
